//test pipline
properties([disableConcurrentBuilds()])

pipeline {
  agent {label: "master"}
    options {
      buildDiscarder(logRotator(numToKeepStr: '10', artifactNumTokeepStr: '10'))
      timestamps()
    }
    stages {
      stage("Update apt") {
        steps { 
          sh 'apt-get install apt'
        }
      }
      stage "Install nginx" {
        steps {
          sh 'apt-get -y install nginx'
        }
      }
      stage "Starting nginx" {
        steps {
          sh 'systemctl start nginx'
        }
      }
      stage "Check if nginx running" {
        steps { 
          sh 'systemctl status nginx'
        }
      }
    }
}
